//     RouteSwtch
//     (c) simonfan
//     RouteSwtch is licensed under the MIT terms.

define("__route-swtcher/route-swtch",["require","exports","module","swtch","lowercase-backbone"],function(e,t,o){{var r=e("swtch"),s=e("lowercase-backbone"),c=s.router.prototype._extractParameters;o.exports=r.extend({execCase:function(e,t){var o=e.condition,r=e.value,s=e.context;if("default"!==o){var n=c(o,t);return r.apply(s,n)}r.call(s,t)}})}}),define("route-swtcher",["require","exports","module","lowercase-backbone","lodash","./__route-swtcher/route-swtch"],function(e,t,o){{var r=e("lowercase-backbone"),s=e("lodash"),c=e("./__route-swtcher/route-swtch"),n=r.router.prototype._routeToRegExp;o.exports=r.router.extend({initialize:function(){r.router.prototype.initialize.apply(this,arguments),this.swtches=[],this.mainSwtch=c(),r.router.prototype.route.call(this,"*route",this.handleRouteEvent)},handleRouteEvent:function(e){this.lastRoute=e,this.exec(e)},exec:function(e){e=e||this.lastRoute,this.mainSwtch.exec(e),s.each(this.swtches,function(t){t.exec(e)},this)},route:function(e,t){var o=n(e);this.mainSwtch.when(o,t)},swtch:function(e){var t=c();return this.swtches.push(t),s.each(e,function(e,o){if("default"===o)t.when("default",e);else{var r=n(o);t.when(r,e)}}),this}})}});