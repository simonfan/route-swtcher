//     RouteSwtch
//     (c) simonfan
//     RouteSwtch is licensed under the MIT terms.

define("__route-swtcher/route-swtch",["require","exports","module","swtch","lowercase-backbone"],function(e,t,o){{var r=e("swtch"),c=e("lowercase-backbone"),n=c.router.prototype._extractParameters;o.exports=r.extend({execCase:function(e,t){var o=e.condition,r=e.value,c=e.context;if("default"!==o){var s=n(o,t);return r.apply(c,s)}r.call(c,t)}})}}),define("route-swtcher",["require","exports","module","lowercase-backbone","lodash","./__route-swtcher/route-swtch"],function(e,t,o){{var r=e("lowercase-backbone"),c=e("lodash"),n=e("./__route-swtcher/route-swtch"),s=r.router.prototype._routeToRegExp;o.exports=r.router.extend({initialize:function(){r.router.prototype.initialize.apply(this,arguments),this.swtches=[],this.mainSwtch=n(),r.router.prototype.route.call(this,"*route",handleRouteEvent)},handleRouteEvent:function(e){this.lastRoute=e,this.exec(e)},exec:function(e){e=e||this.lastRoute,this.mainSwtch.exec(e),c.each(this.swtches,function(t){t.exec(e)},this)},route:function(e,t){var o=s(e);this.mainSwtch.when(o,t)},swtch:function(e){var t=n();return this.swtches.push(t),c.each(e,function(e,o){if("default"===o)t.when("default",e);else{var r=s(o);t.when(r,e)}}),this}})}});